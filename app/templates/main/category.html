{% extends "main/base.html" %}


{% block app_content %}
    <script type="text/javascript" src="{{ url_for('static', filename='slider.js') }}"></script>

    <link rel="stylesheet" href="{{ url_for('static', filename='category/category.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='category_slider.css') }}">
    <h1>{{ category.name }}</h1>
    <div class="container">
        <div class="data">
            <div class="block_slider">
                <div class="slider">
                    <div class="slider__container">
                        <div class="slider__wrapper">
                            <div class="slider__items">
                                {% for i in range(3) %}
                                <div class="slider__item">
                                    <img class="slider__img" alt="" src="{{ url_for('static',filename='/images/staff/1.png' ) }}">
                                </div>
                                <div class="slider__item">
                                    <img class="slider__img" alt="" src="{{ url_for('static',filename='/images/staff/2.png' ) }}">
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                    <a class="slider__control slider__control_prev" href="#" role="button" data-slide="prev"></a>
                    <a class="slider__control slider__control_next" href="#" role="button" data-slide="next"></a>
                </div>
            </div>
        </div>
        <div class="category_description">
            <div class="text">
                {{ category.description if category.description }}
            </div>
        </div>
        <div class="buttons">
            {% for element in services %}
            {% set service = element.service %}
            {% if service.status == true %}
            <div id="{{ service.id }}" class="button_3">
                <div class="content">
                    <div style="display: flex; justify-content: space-between; margin-right: 8px">
                        <div>{{ service.name }}</div>
                        <div>{{ service.prices[0] }}</div>
                    </div>
                    {% if service.short_description %}
                    <div class="description">
                        {% if service.short_description != None %}
                        <br>{{ service.short_description }}
                        {% endif %}
                        <br>
                        <a style="color: black;"
                           href="{{ url_for('main.service') }}?service_id={{ service.id }}">
                            Подробнее
                        </a>
                    </div>
                    {% endif %}
                </div>
            </div>
            {% endif %}
            {% endfor %}
        </div>

        <script>
        let services = document.querySelectorAll('.button_3')

        for (let service of services) {
            service.addEventListener('click', function () {
                service.querySelector('.description').classList.toggle('active')
            })
        }

        style_css()

        function style_css() {
            let detect = new MobileDetect(window.navigator.userAgent)
            let link = document.createElement('link')
            link.rel = 'stylesheet';
            link.type = 'text/css';
            link.media = 'all';

            if (detect.mobile()) {
                link.href = '/app/static/category/category_phone.css';
            } else {
                link.href = '/app/static/category/category_desktop.css'
            }

            document.head.append(link)
        }
    </script>

{% endblock %}