{% extends "main/base.html" %}


{% block app_content %}
    <script type="text/javascript" src="{{ url_for('static', filename='slider.js') }}"></script>

    <link rel="stylesheet" href="{{ url_for('static', filename='category/category.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='category_slider.css') }}">
    <h1>{{ category.name }}</h1>
    <div class="container">
        <div class="data">
            <table id="table" style="margin: 2px;" class="table">
                <tr>
                    <td>
                        <div class="block_slider">
                            <div class="slider">
                                <div class="slider__container">
                                    <div class="slider__wrapper">
                                        <div class="slider__items">
                                            <div class="slider__item">
                                                <img src="{{ url_for('static',filename='/images/category/1.png' ) }}"
                                                     alt="">
                                            </div>
                                            <div class="slider__item">
                                                <img src="{{ url_for('static',filename='/images/category/1.png' ) }}"
                                                     alt="">
                                            </div>
                                            <div class="slider__item">
                                                <img src="{{ url_for('static',filename='/images/category/1.png' ) }}"
                                                     alt="">
                                            </div>
                                            <div class="slider__item">
                                                <img src="{{ url_for('static',filename='/images/category/1.png' ) }}"
                                                     alt="">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <a class="slider__control slider__control_prev" href="#" role="button"
                                   data-slide="prev"></a>
                                <a class="slider__control slider__control_next" href="#" role="button"
                                   data-slide="next"></a>
                            </div>
                        </div>
                    </td>
                    <td>
                        <h1>ОПИСАНИЕ</h1>
                        {% if category.description == true %}
                            <div class="text">
                                <span>{{ category.description }}</span>
                            </div>
                        {% endif %}
                    </td>
                </tr>
            </table>
        </div>
    </div>
    <div class="buttons">
        {% for element in services %}
            {% set service = element.service %}
            {% if service.status == true %}
                <button id="{{ service.id }}", class="button">
                    <div class="content">
                        {{ service.name }} - Цена: {{ service.price }}
                        <div class="description">
                            {% if service.short_description != None %}
                                <br>{{ service.short_description }}
                            {% endif %}
                            <br><a href="{{ url_for('main.service') }}?service_id={{ service.id }}">Ссылка на полное описание </a>
                        </div>
                    </div>
                </button>
            {% endif %}
        {% endfor %}
    </div>


    <script>
        let services = document.querySelectorAll('.button')

        for(let service of services) {
            service.addEventListener('click', function() {
                service.querySelector('.description').classList.toggle('active')
            })
        }

        let detect = new MobileDetect(window.navigator.userAgent)
        let link = document.createElement('link')
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.media = 'all';

        if (detect.mobile()) {
            link.href = '/app/static/category/category_phone.css';
        } else {
            link.href = '/app/static/category/category_desktop.css'
        }

        document.head.append(link)
    </script>

{% endblock %}